<%- include('layouts/head'); -%>

<%- include('layouts/autocheck'); -%>
    
<% var orgName = orgName; %>
<% var orgAvatar = orgAvatar; %>
<% var assignmentRegex = assignmentRegex; %>
<% var assignmentName = assignmentName; %>
<% var repos = repos; %>

<div class="content-wrapper">
  <div class="content-heading">
      <div class="row">
          <div class="col-lg-12">
              <h1>Repositories</h1>
          </div>
      </div>
      <div class="row">
          <div class="col-lg-3">
            <h4><%= assignmentName %></h4>
          </div>
      </div>
      <div class="row" style="border-top: 1px solid white; margin-top:10px;">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a role="button" onclick="OrgsRender()">Orgs</a></li>
          <li class="breadcrumb-item"><a role="button" onclick="AssignmentsRender('<%= orgName %>', '<%= orgAvatar %>')">Assignment</a></li>
          <li class="breadcrumb-item active">Repos</li>
        </ol>
      </div>
  </div>
  <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="panel panel-default" style="border:1px solid black;">
            <div class="panel-heading" style="border-bottom:1px solid black">
              <div class="row">
                <div class="col-lg-4">
                    <h3>Repos</h3>
                </div>
                <div class="col-lg-3">
                  <input class="form-control" type="text" name="evalrepo_name" id="evalrepo-name" value="" placeholder="Repo Name">
                </div>
                <div class="col-lg-2">
                  <button type="button" class="btn btn-primary btn-block" onclick="createEvalRepo('<%= orgName %>', '<%= orgAvatar %>', '<%= assignmentRegex %>', '<%= assignmentName %>', '<%= repos %>')"> 
                    <i class="fas fa-check"></i> Create Eval Repo
                  </button>
                </div>
              </div>
            </div>
            <div class="panel-body fixed-panel"> 
              <% for(var i=0; i < repos.length; i++) { %>
                  <div class="row">
                    <div class="col-lg-12">
                      <div class="panel panel-default" style="border:1px solid white; border-bottom:1px solid black;">
                        <div class="panel-heading">
                          <div class="row">
                            <div class="col-lg-1">
                              <img src="<%= orgAvatar %>" class="img-responsive"  style=" height:35px;">
                            </div>
                            <div class="col-lg-2">
                              <h5> alu0100815733 </h5>
                            </div>
                            <div class="col-lg-3">
                                <a class="" role="button" onclick="openRepo('<%= repos[i].name %>', '<%= orgName %>')"><h4> <%= repos[i].name %> </h4></a>
                            </div>
                            <div class="col-lg-3">
                              <a class="" role="button" onclick="openTravis('<%= repos[i].name %>', '<%= orgName %>')">
                                <img src=<%= "https://travis-ci.org/ULL-ESIT-GRADOII-TFG/"+repos[i].name+".svg?branch=master"%> class="img-responsive"  style="">
                              </a>
                            </div>
                            <div class="col-lg-1">
                              <button type="button" name="button">ACTIONS</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                <% } %>
            </div>
          </div>
      </div>

      </div>
  </div>
</div>
          
<footer><span>&copy; 2018 AutoCheck</span></footer>

<%- include('layouts/footer'); -%>
